why# .github/workflows/deploy-flamebank.yml
name: Deploy Flamebank.ac

on:
  push:
    branches:
      - main   # Stable releases
      - beta   # Beta releases

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      # 1. Checkout repo
      - name: Checkout code
        uses: actions/checkout@v4

      # 2. Setup Node (if using Node.js/Next.js)
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'  # Change to your Node version

      # 3. Install dependencies
      - name: Install dependencies
        run: |
          if [ -f package.json ]; then
            npm install
          fi

      # 4. Build site
      - name: flamebank.ac
        run: |
          if [ -f package.json ]; then
            npm run build || echo "No build script defined, skipping"
          fi

      # 5. Lint / validate (optional)
      - name: Lint HTML/CSS/JS
        run: |
          echo "Linting step placeholder - add stylelint/eslint if needed"

      # 6. Deploy to GitHub Pages
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v6
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./out  # Adjust if your build outputs somewhere else
          # Set the branch per release type
          publish_branch: ${{ github.ref == 'refs/heads/main' && 'gh-pages' || 'beta-pages' }}

      # 7. Post-deploy message
      - name: Deployment status
        run: echo "Flamebank.ac deployed successfully to GitHub Pages"
"scripts": {
  "build": "next build && next export"
}# .github/workflows/deploy-static-flamebank.yml
name: Deploy Static Flamebank.ac

on:
  push:
    branches:
      - main   # Stable releases
      - beta   # Beta releases

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # 1. Checkout repo
      - name: Checkout repository
        uses: actions/checkout@v4

      # 2. Set up branch-based deployment directory
      - name: Set deploy branch
        id: deploy_branch
        run: |
          if [ "${GITHUB_REF##*/}" == "main" ]; then
            echo "branch=gh-pages" >> $GITHUB_OUTPUT
          else
            echo "branch=beta-pages" >> $GITHUB_OUTPUT
          fi

      # 3. Copy site files (assumes root contains index.html, assets folder, etc.)
      - name: Prepare files
        run: |
          mkdir deploy
          cp -r * deploy/
          # Remove workflow folder from deploy
          rm -rf deploy/.github

      # 4. Deploy to GitHub Pages
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v6
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./deploy
          publish_branch: ${{ steps.deploy_branch.outputs.branch }}

      # 5. Deployment confirmation
      - name: Deployment complete
        run: echo "Flamebank.ac deployed successfully!"
name: Flamebank Full Deployment

on:
  push:
    branches:
      - main
      - beta

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
      - run: npm install
      - run: npx hardhat compile

      # Deploy NFT contract if needed
      - name: Deploy NFT
        run: node scripts/deploy_nft.js

      # Deploy Flamebank contract
      - name: Deploy Flamebank
        run: node scripts/deploy_flamebank.js

      # Beta branch user generation
      - if: github.ref == 'refs/heads/beta'
        run: node scripts/deploy_and_register.js

      # Main branch ledger sync
      - if: github.ref == 'refs/heads/main'
        run: node scripts/sync_ledger.js

      # Commit updated ledger and version info
      - name: Commit ledger
        run: |
          git config --global user.name "FlamebankBot"
          git config --global user.email "bot@flamebank.ac"
          git add ledger.json version.txt
          git commit -m "Update ledger & version [skip ci]" || echo "No changes"
          git push